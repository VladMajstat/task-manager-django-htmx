<div class="app-task-row d-flex align-items-stretch gap-2 px-2 border-top"
     data-task-id="{{ task.id|default:'' }}">
  <div class="pt-1 app-task-col app-task-col-check">
    <input class="form-check-input" type="checkbox" disabled />
  </div>

  <form
    class="app-task-edit-form d-flex align-items-center gap-2 flex-grow-1"
    hx-post="{% if task %}{% url 'service:task_update' task.id %}{% elif project %}{% url 'service:task_create' project.id %}{% endif %}"
    hx-target="closest .app-task-row"
    hx-swap="outerHTML"
    hx-disabled-elt="this"
  >
    {% csrf_token %}
    <div class="app-task-col app-task-col-text flex-grow-1">
      <div class="app-task-edit-fields d-flex align-items-center gap-2">
        {{ form.name }}
        {{ form.deadline }}
      </div>
      {% if form.name.errors %}
        <div class="invalid-feedback d-block">
          {{ form.name.errors|join:", " }}
        </div>
      {% endif %}
      {% if form.deadline.errors %}
        <div class="invalid-feedback d-block">
          {{ form.deadline.errors|join:", " }}
        </div>
      {% endif %}
    </div>

    <div class="app-task-col app-task-col-actions app-task-edit-actions">
      <button class="btn btn-success btn-sm" type="submit">Save</button>
    </div>
  </form>
</div>
