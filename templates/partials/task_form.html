<div class="app-task-row d-flex align-items-start gap-2 px-2 py-2 border-top"
     data-task-id="{{ task.id|default:'' }}">
  <div class="pt-1">
    <input class="form-check-input" type="checkbox" disabled />
  </div>

  <div class="flex-grow-1">
    <form
      class="d-flex flex-column gap-2"
      hx-post="{% if task %}{% url 'service:task_update' task.id %}{% elif project %}{% url 'service:task_create' project.id %}{% endif %}"
      hx-target="closest .app-task-row"
      hx-swap="outerHTML"
      hx-disabled-elt="this"
    >
      {% csrf_token %}
      <div>
        {{ form.name }}
        {% if form.name.errors %}
          <div class="invalid-feedback d-block">
            {{ form.name.errors|join:", " }}
          </div>
        {% endif %}
      </div>
      <div class="d-flex gap-2">
        <div class="flex-grow-1">
          {{ form.deadline }}
          {% if form.deadline.errors %}
            <div class="invalid-feedback d-block">
              {{ form.deadline.errors|join:", " }}
            </div>
          {% endif %}
        </div>
        <div style="max-width: 140px;">
          {{ form.priority }}
          {% if form.priority.errors %}
            <div class="invalid-feedback d-block">
              {{ form.priority.errors|join:", " }}
            </div>
          {% endif %}
        </div>
      </div>
      <button class="btn btn-success btn-sm" type="submit">Save</button>
    </form>
  </div>
</div>
