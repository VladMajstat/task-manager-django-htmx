<div class="col-12 col-lg-6">
  <section class="card app-card shadow-sm" data-project-id="{{ project.id }}">

    <!-- Card header -->
    <div class="app-card-header d-flex align-items-center justify-content-between">
      <div class="d-flex align-items-center gap-2">
        <span class="app-icon" aria-hidden="true">LIST</span>
        <h2 class="h6 m-0 text-white">{{ project.name }}</h2>
      </div>

      <div class="d-flex align-items-center gap-2">
        <button
          class="btn btn-sm btn-link text-white-50 app-icon-btn"
          title="Edit"
          type="button"
          hx-get="{% url 'service:project_update' project.id %}"
          hx-target="closest .app-card"
          hx-swap="outerHTML"
        >
          Edit
        </button>
        <button
          class="btn btn-sm btn-link text-white-50 app-icon-btn"
          title="Delete"
          type="button"
          hx-post="{% url 'service:project_delete' project.id %}"
          hx-target="closest .col-12"
          hx-swap="delete"
          hx-confirm="Delete this project?"
        >
          Delete
        </button>
      </div>
    </div>

    <!-- Add task row -->
    <div class="app-add-task-row p-2 border-bottom">
      <form
        class="input-group"
        hx-post="{% url 'service:task_create' project.id %}"
        hx-target="#project-{{ project.id }}-tasks"
        hx-swap="afterbegin"
        hx-disabled-elt="this"
      >
        {% csrf_token %}
        <span class="input-group-text app-plus" title="Add">+</span>
        {{ task_form.name }}
        <button
          class="btn btn-success app-add-task-btn"
          type="submit"
        >
          Add Task
        </button>
      </form>
    </div>

    <!-- Tasks list -->
    <div class="app-tasks" id="project-{{ project.id }}-tasks">
      {% for task in project.tasks.all %}
        {% include "partials/task_row.html" with task=task %}
      {% empty %}
        <div class="px-3 py-3 text-muted small">No tasks yet.</div>
      {% endfor %}
    </div>

  </section>
</div>
