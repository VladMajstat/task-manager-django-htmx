<div class="col-12 col-lg-8">
  <section class="card app-card shadow-sm" data-project-id="{{ project.id }}">

    <!-- Card header -->
    {% include "partials/project_header.html" with project=project %}

    <!-- Add task row -->
    <div class="app-add-task-row p-2 border-bottom">
      <form
        class="input-group"
        hx-post="{% url 'service:task_create' project.id %}"
        hx-target="#project-{{ project.id }}-tasks"
        hx-swap="afterbegin"
        hx-disabled-elt="this"
        hx-on="htmx:afterRequest: this.reset()"
      >
        {% csrf_token %}
        <span class="input-group-text app-plus" title="Add" aria-hidden="true">+</span>
        {{ task_form.name }}
        <button
          class="btn btn-success app-add-task-btn"
          type="submit"
        >
          Add Task
        </button>
      </form>
    </div>

    <!-- Tasks list -->
    <div class="app-tasks" id="project-{{ project.id }}-tasks">
      {% for task in project.tasks.all %}
        {% include "partials/task_row.html" with task=task %}
      {% empty %}
        <div id="project-{{ project.id }}-empty" class="px-3 py-3 text-muted small">No tasks yet.</div>
      {% endfor %}
    </div>

  </section>
</div>
