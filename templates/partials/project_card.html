<div id="projects-empty" hx-swap-oob="delete"></div>
<div class="col-12 col-lg-8">
  <section class="card app-card shadow-sm" data-project-id="{{ project.id }}">

    <!-- Card header -->
    {% include "partials/project_header.html" with project=project %}

    <!-- Add task row -->
    <div class="app-add-task-row p-2 border-bottom">
      {% comment %} Add-task form: HTMX POST creates a task and inserts the row {% endcomment %}
      <form
        class="input-group"
        hx-post="{% url 'service:task_create' project.id %}"
        hx-target="#project-{{ project.id }}-tasks"
        hx-swap="afterbegin"
        hx-disabled-elt="this"
        hx-on="htmx:afterRequest: this.reset()"
        data-validate="quiet"
      >
        {% csrf_token %}
        <span class="input-group-text app-plus" title="Add" aria-hidden="true">+</span>
        {{ task_form.name }}
        {% comment %} Add task button: submit the form {% endcomment %}
        <button
          class="btn btn-success app-add-task-btn"
          type="submit"
        >
          Add Task
        </button>
      </form>
    </div>

    <!-- Tasks list -->
    {% include "partials/task_list.html" with project=project %}

  </section>
</div>
