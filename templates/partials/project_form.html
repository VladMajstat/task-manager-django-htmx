<div class="col-12 col-lg-6">
  <section class="card app-card shadow-sm" data-project-id="{{ project.id|default:'' }}">
    <div class="app-card-header d-flex align-items-center justify-content-between">
      <div class="d-flex align-items-center gap-2">
        <span class="app-icon" aria-hidden="true">LIST</span>
        <h2 class="h6 m-0 text-white">
          {% if project %}Edit project{% else %}New project{% endif %}
        </h2>
      </div>
    </div>

    <div class="p-3 bg-white">
      {% comment %} Create/edit project form: HTMX POST replaces the card {% endcomment %}
      <form
        hx-post="{% if project %}{% url 'service:project_update' project.id %}{% else %}{% url 'service:project_create' %}{% endif %}"
        hx-target="{% if project %}closest .app-card{% else %}closest .col-12{% endif %}"
        hx-swap="outerHTML"
        hx-disabled-elt="this"
      >
        {% csrf_token %}
        <div class="mb-2">
          {{ form.name }}
          {% if form.name.errors %}
            <div class="invalid-feedback d-block">
              {{ form.name.errors|join:", " }}
            </div>
          {% endif %}
        </div>
        {% comment %} Save project button {% endcomment %}
        <button class="btn btn-success" type="submit">Save</button>
      </form>
    </div>
  </section>
</div>
