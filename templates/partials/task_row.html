<div class="app-task-row d-flex align-items-start gap-2 px-2 py-2 border-top"
     data-task-id="{{ task.id }}">

  <div class="pt-1">
    <input class="form-check-input" type="checkbox" {% if task.is_done %}checked{% endif %}
      hx-post="{% url 'service:task_toggle_done' task.id %}"
      hx-target="closest .app-task-row"
      hx-swap="outerHTML"
    />
  </div>

  <div class="flex-grow-1">
    <div class="app-task-text {% if task.is_done %}app-task-done{% endif %}">
      {{ task.name }}
    </div>

    {% if task.priority or task.deadline %}
      <div class="small text-muted mt-1">
        {% if task.priority %}
          <span class="me-2">Priority: <strong>{{ task.priority }}</strong></span>
        {% endif %}
        {% if task.deadline %}
          <span>Deadline: <strong>{{ task.deadline }}</strong></span>
        {% endif %}
      </div>
    {% endif %}
  </div>

  <!-- Task actions -->
  <div class="d-flex align-items-center gap-1">
    <button
      class="btn btn-sm btn-link text-muted app-icon-btn"
      title="Edit"
      type="button"
      hx-get="{% url 'service:task_update' task.id %}"
      hx-target="closest .app-task-row"
      hx-swap="outerHTML"
    >
      Edit
    </button>
    <button
      class="btn btn-sm btn-link text-muted app-icon-btn"
      title="Delete"
      type="button"
      hx-post="{% url 'service:task_delete' task.id %}"
      hx-target="closest .app-task-row"
      hx-swap="delete"
      hx-confirm="Delete this task?"
    >
      Delete
    </button>
  </div>
</div>
