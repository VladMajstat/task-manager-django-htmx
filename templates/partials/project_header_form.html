<div class="app-card-header d-flex align-items-center justify-content-between">
  {% comment %} Header edit form: HTMX POST replaces the header {% endcomment %}
  <form
    class="d-flex align-items-center gap-2 flex-grow-1"
    hx-post="{% url 'service:project_update' project.id %}"
    hx-target="closest .app-card-header"
    hx-swap="outerHTML"
    hx-disabled-elt="this"
  >
    {% csrf_token %}
    <span class="app-icon" aria-hidden="true">
      <svg class="app-icon-svg" viewBox="0 0 24 24" aria-hidden="true">
        <rect class="app-icon-fill" x="3" y="5" width="18" height="16" rx="2" ry="2"></rect>
        <rect class="app-icon-bar" x="3" y="8" width="18" height="2"></rect>
        <rect class="app-icon-ring" x="6.5" y="3" width="2.5" height="4"></rect>
        <rect class="app-icon-ring" x="15" y="3" width="2.5" height="4"></rect>
        <rect class="app-icon-line" x="6" y="11" width="12" height="1.6"></rect>
        <rect class="app-icon-line" x="6" y="14" width="12" height="1.6"></rect>
        <rect class="app-icon-line" x="6" y="17" width="12" height="1.6"></rect>
        <rect class="app-icon-stroke" x="3" y="5" width="18" height="16" rx="2" ry="2"></rect>
      </svg>
    </span>

    <div class="flex-grow-1">
      {{ form.name }}
      {% if form.name.errors %}
        <div class="invalid-feedback d-block">
          {{ form.name.errors|join:", " }}
        </div>
      {% endif %}
    </div>

    {% comment %} Save name button {% endcomment %}
    <button class="btn btn-sm btn-light" type="submit">Save</button>
    {% comment %} Cancel button: HTMX GET restores the header view {% endcomment %}
    <button
      class="btn btn-sm btn-link text-white-50 app-icon-btn"
      type="button"
      title="Cancel"
      hx-get="{% url 'service:project_update' project.id %}?mode=view"
      hx-target="closest .app-card-header"
      hx-swap="outerHTML"
    >
      Cancel
    </button>
  </form>
</div>
